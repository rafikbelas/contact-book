# Contact Book - API Documentation

### Table of Contents
1. [Introduction](#introduction)
2. [What's in the project](#about)
3. [Running the application](#running)  
  3.1. [Build - test - package from the source code](#source)  
  3.2. [Run using docker](#docker)  
  3.3. [Run the Docker image from DockerHub](#hub)  
4. [Testing the application](#testing)

<a name="introduction"></a>
### 1. Introduction
This project is a contact book API that fullfills the following use cases:
- Get all contacts.
- Get all contacts for a certain postal code.
- Add a new contact.  
Each contact has a full-name, date of birth and an address sub-entity.  
An address itself has two generic address fields, a city and a postal code.  
Contacts are persisted to an in-memory database, which is started along with the
application.  
Each contact has a unique identifier, which is generated by the database upon
storing a new contact.  
~~The application performs logging every time a contact has been created.~~

<a name="about"></a>
### 2. What's in the project
- A micro-service that you can build, test & run yourselves.
- Source code that you can review.
- In-memory database.
- Test coverage for the web layer and service layer.
- Service running on port 8080.
- BONUS: Dockererization with multi-layer build and relevant README instructions.
   
<a name="running"></a>
### 3. Running the application
You can either run the application by building, testing and running the project from the source code, OR spin-up a container using docker, OR use the Docker image provided on DockerHub to run a container.

<a name="source"></a>
#### 3.1. Build - test - run from the source code.
**Prerequisites:** `Maven 3.6.3`, `Java 11`
- Download source code or clone it using `git clone https://github.com/rafikbelas/contact-book.git`
- Go to the project folder `cd PROJECT_FOLDER`
- Run the following command `mvn clean`
- Test the application by running `mvn test`
- Run the application by running: `mvn spring-boot:run`. This will start the application on port 8080 http://localhost:8080/

<a name="docker"></a>
#### 3.2. Run using docker
**Prerequisites:** `docker`
- Download source code or clone it using `git clone https://github.com/rafikbelas/contact-book.git`
- Go to the project folder `cd PROJECT_FOLDER`
- Run the following commands `docker build -t contact-book:latest . && docker run -dp 8080:8080 contact-book`. This will build a new image if not existant and run a container from it.

<a name="hub"></a>
#### 3.3. Run the Docker image from DockerHub
**Prerequisites:** `docker`
- Run the following command 
`docker run -dp 8080:8080 rafikbelas/contact-book`. This will download the `contact-book` image available on DockerHub on https://hub.docker.com/r/rafikbelas/contact-book and run it.

<a name="testing"></a>
### 3. Testing the application
You can test the application using the following `curl` commands:

- Get all contacts:  
`curl --location --request GET 'http://localhost:8080/contacts'`

- Get Contacts for a specific postal code:  
`curl --location --request GET 'http://localhost:8080/contacts?postalCode=90210'`

- Add a new contact:  
`curl --location --request POST 'http://localhost:8080/contacts' \
--header 'Content-Type: application/json' \
--data-raw '{
    "firstName": "Johnny",
    "lastName": "Cash",
    "dateOfBirth" : "1992-04-07",
    "address" : {
        "address1": "213 Street of Syria",
        "address2": "Severn",
        "city": "Maryland",
        "postalCode": "47903"
    }
}'`